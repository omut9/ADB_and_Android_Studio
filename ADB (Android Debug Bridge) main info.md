**ADB (Android Debug Bridge)** – консольная клиент-серверная программа, выполняет роль универсального интерфейса для управления Android-устройствами (или их эмуляторами).

 **Установка ADB в Windows**

Скачайте [SDK Platform Tools](https://trofimovdigital.ru/https:/developer.android.com/studio/releases/platform-tools.html) и распакуйте папку platform-tools на диск.

В системную переменную Path добавьте путь к распакованной папке, для этого:

- перейдите в **Панель управления – Система и     безопасность – Система**;
- выберите пункт **Дополнительные параметры     системы**;
- нажмите кнопку **Переменные среды**;
- найти переменную **Path** и добавить в конец строки, через точку с запятой, путь до папки с adb. Теперь после запуска консоли можно сразу вводить необходимые команды.

**Команды ADB**

| **adb version**                                              | будет выведена информация о версии ADB                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| **adb -d tcpip 5555**                                        | разрешить  устройству принимать соединения TCP/IP через порт 5555. <br />Параметр -d  отправит команду только на устройство, подключенное через USB. |
| **adb -s 9A301FFAZ00DQT  tcpip 5555**                        | если устройств несколько - указать серийный номер  устройства |
| **adb devices -l**                                           | узнать серийный номер и получить информацию о подключенных  устройствах |
| **adb connect  device_ip_address**                           | подключиться к устройству по его ip-адресу.                  |
| **adb disconnect device_ip_address**                         | отключение от  устройства                                    |
| **adb  start-server**                                        | перезапуск сервера                                           |
| **adb kill-server**                                          | остановка сервера                                            |
| **adb devices**                                              | вывод списка  подключенных устройств                         |
| **adb shell**                                                | вызов консоли  Android (shell) для выполнения Linux-команд   |
| **adb shell screencap /sdcard/screenshot.png**               | создание скриншота, сохраняет файл на устройство             |
| **adb exec-out screencap -p > screen.png**                   | создание скриншота,  сохраняет файл на пк                    |
| **adb shell  screenrecord /sdcard/video.mp4**                | запись скринкаста (захват изображения с экрана)              |
| **adb push C:\app.apk  /sdcard/Download**                    | отправка файла с  компьютера на смартфон (возможна отправка каталогов) |
| **adb pull  /sdcard/video.mp4 C:\Users\Overclocker\Downloads** | копирование файла с  компьютера на смартфон (возможно копирование каталогов); |
| **adb install [-l] [-r]  [-s] название_приложения.apk**  <br />(*Например*, adb -s 9A301FFAZ00DQT  install ~/Downloads/mobyandex-master-arm_6_45.apk) | установить приложение на устройство.<br />Ключи: <br />-l  блокировка приложения;   <br />-r  переустановить приложение, с сохранением  данных;   <br />-s  установить  приложение на карту памяти;   <br />-f  установка приложения  во внутреннюю память |
| **adb uninstall [-k] название_приложения.apk**               | удалить приложение с устройства. Ключ -k означает, не  удалять сохраненные данные приложения и пользователя. |
| **adb reboot**                                               | перезагрузка  устройства                                     |
| **adb reboot recovery**                                      | перезагрузка  устройства в режим восстановления (recovery)   |
| **adb shell pm  list packages**                              | вывод списка  установленных приложений                       |
| **adb shell  dumpsys package com.app.example**               | вывод информации о  приложении                               |

 **ADB LogCat**

Logcat — инструмент для работы с логами Android. В простейшем случае, чтобы вывести журнал системных сообщений устройства используйте следующую команду.

**adb logcat**

или через shell

**adb shell**

**# logcat**

Для остановки сбора логов нажмите Ctrl+C на клавиатуре (Command + C на Mac).

Чтобы вывести лог на экран и выйти из logcat используйте параметр -d.

В записях лога в Android указан приоритет:

- V — verbose (низший приоритет);
- D — debug;
- I — info;
- W — warning;
- E — error;
- F — fatal;
- S — silent (наивысший приоритет, ничего не     выводится).

Фильтровать сообщения по приоритету можно следующим образом.

**adb logcat '\*:W'**

Кроме приоритета у записей указан тэг компонента системы, от которого принято сообщение.

В дополнение к тэгу и приоритету в логе так же содержатся поля с метаданными. Формат можно изменять с помощью параметра -v, за которым следует один из нижеперечисленных форматов вывода:

- brief — показывать приоритет, тэг и PID     процесса (формат по умолчанию);
- process — показывать только PID;
- tag — показывать только приоритет, тэг;
- thread — показывать только процесс, поток и     приоритет, тэг;
- raw — показать необработанное сообщение, без     полей метаданных;
- time — показывать дату, время вызова,     приоритет, тэг и PID процесса;
- long — показывать все поля метаданных и     отдельно сообщения с пустыми строками.

**adb logcat -v thread -d > C:\logcat.txt**

 **Список параметров команды logcat:**

-d вывести лог на экран и выйти;
-b загрузить альтернативный буфер лога для просмотра, такой как event или radio;
-c очистить лог и выйти;
-f записать сообщения лога в файл. По умолчанию в stdout;
-g вывести размер указанного буфера лога и выйти;
-n установить максимальное количество ротаций лога;
-s устанавливает silent фильтром по умолчанию;
-v устанавливает формат вывода сообщений лога. По умолчанию brief.



Tools for ADB:

1.	Плагин для Total Commander - Android ADB (http://totalcmd.net/plugring/android_adb.html).
2.	ADB Gui Tool (https://minooch.com/apps.html).
3.	Flakie’s ADB GUI App (https://flakie.co.uk/my-adb-gui-app/).
4.	SimpleADB (https://kandiral.ru/delphi/simpleadb.html).
5.	Android device monitor – идет в составе Android studio, хороший инструмент для снятия логов и не только. Работает без запуска Android studio. (C:\Users\username\AppData\Local\Android\Sdk\tools\lib\monitor-x86_64).

 

 